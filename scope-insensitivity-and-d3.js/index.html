<!doctype html><html lang=en>
<head>
<title>
Scope insensitivity and d3.js ::
Henry Stanley
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="tl;dr: Check out my Observable notebook showing how vast the scale of factory farming is.
 Scope insensitivity is our inabiity to grasp really large numbers. When you think about the difference between a million people and a billion people, your brain can&amp;rsquo;t really represent that thousandfold difference, so it gets compressed down to being abstractly &amp;lsquo;larger&amp;rsquo;. We don&amp;rsquo;t suffer the same bias with quantities small enough to visualise.">
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=https://henrystanley.com/scope-insensitivity-and-d3.js/>
<link rel=stylesheet href=https://henrystanley.com/assets/style.css>
<link rel=stylesheet href=https://henrystanley.com/style.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=https://henrystanley.com/img/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=https://henrystanley.com/img/favicon.png>
<link href=https://henrystanley.com/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://henrystanley.com/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://henrystanley.com/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://henrystanley.com/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://henrystanley.com/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://henrystanley.com/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Scope insensitivity and d3.js">
<meta name=twitter:description content="tl;dr: Check out my Observable notebook showing how vast the scale of factory farming is.
 Scope insensitivity is our inabiity to grasp really large numbers. When you think about the difference between a million people and a billion people, your brain can&rsquo;t really represent that thousandfold difference, so it gets compressed down to being abstractly &lsquo;larger&rsquo;. We don&rsquo;t suffer the same bias with quantities small enough to visualise.">
<meta property="og:title" content="Scope insensitivity and d3.js">
<meta property="og:description" content="tl;dr: Check out my Observable notebook showing how vast the scale of factory farming is.
 Scope insensitivity is our inabiity to grasp really large numbers. When you think about the difference between a million people and a billion people, your brain can&rsquo;t really represent that thousandfold difference, so it gets compressed down to being abstractly &lsquo;larger&rsquo;. We don&rsquo;t suffer the same bias with quantities small enough to visualise.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://henrystanley.com/scope-insensitivity-and-d3.js/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2018-06-15T10:00:00-04:00">
<meta property="article:modified_time" content="2018-06-15T10:00:00-04:00"><meta property="og:site_name" content="Henry Stanley">
</head>
<body>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>Henry Stanley</span>
<span class=logo__cursor></span>
</a>
<span class=header__right>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/post>Archive</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/post>Archive</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>Scope insensitivity and d3.js</h1>
<div class=post-meta>
<span class=post-date>
2018-06-15
</span>
<span class=post-read-time>— 3 min read</span>
</div>
<div class=post-content>
<blockquote>
<p>tl;dr: Check out my <a href=https://beta.observablehq.com/@henryaj/where-we-donate-and-why-it-matters>Observable notebook</a> showing how vast the scale of factory farming is.</p>
</blockquote>
<p><a href=https://en.wikipedia.org/wiki/Scope_neglect>Scope insensitivity</a> is our inabiity to grasp really large numbers. When you think about the difference between a million people and a billion people, your brain can&rsquo;t really represent that thousandfold difference, so it gets compressed down to being abstractly &lsquo;larger&rsquo;. We don&rsquo;t suffer the same bias with quantities small enough to visualise.</p>
<p>I wanted to see if I could build visualisations to address this. Numbers on a page don&rsquo;t do it – is there a way to <em>show</em> these large numbers in a way that people can empathise with?</p>
<p>I used some facts and figures from <a href=https://animalcharityevaluators.org/donation-advice/why-farmed-animals/><em>Why Farmed Animals?</em></a> by Animal Charity Evaluators. They rightly point out that, even though most of the animals killed in the US are killed for food, charities trying to help farmed animals receive very little financial support. Animal shelters receive much more, even though few animals are killed in shelters, relatively speaking.</p>
<p>Using <a href=https://github.com/tomgp/d3-iconarray>d3-iconarray</a>, I built some figures similar to the ones in the ACE article.</p>
<p>Here&rsquo;s where Americans donate:</p>
<p><img src=/images/animal-donations.png alt></p>
<p>and here&rsquo;s a very different picture – where animals actually get used:</p>
<p><img src=/images/animals-used.png alt></p>
<p>Some of the figures surfaced are really unbelievable, like this one:</p>
<blockquote>
<p>279 chickens [were] killed per second. An additional 13 other farmed animals were killed per second &mldr; [T]hese numbers are for the U.S. alone.</p>
</blockquote>
<p>292 animals per second – most of whom likely had an unhappy life. This is a staggering number. I wanted to find a way to visualise it, to give it more visual weight.</p>
<p>Initially, I wrote some code to paint dots on the page which would expand and fade out, one per animal killed:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>svg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>d3</span>.<span style=color:#a6e22e>select</span>(<span style=color:#a6e22e>DOM</span>.<span style=color:#a6e22e>svg</span>(<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>))
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvas</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>svg</span>.<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#34;g&#34;</span>)

<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>paintDot</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
    <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>insert</span>(<span style=color:#e6db74>&#34;circle&#34;</span>, <span style=color:#e6db74>&#34;rect&#34;</span>)
        .<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;cx&#34;</span>, Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#a6e22e>width</span>)
        .<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;cy&#34;</span>, Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#a6e22e>height</span>)
        .<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;r&#34;</span>, <span style=color:#ae81ff>1</span>)
        .<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#34;fill&#34;</span>, <span style=color:#a6e22e>crimson</span>)
        .<span style=color:#a6e22e>transition</span>()
        .<span style=color:#a6e22e>duration</span>(<span style=color:#ae81ff>5000</span>)
        .<span style=color:#a6e22e>ease</span>(Math.<span style=color:#a6e22e>sqrt</span>)
        .<span style=color:#a6e22e>attr</span>(<span style=color:#e6db74>&#34;r&#34;</span>, <span style=color:#ae81ff>150</span>)
        .<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#34;fill&#34;</span>, <span style=color:#e6db74>&#34;white&#34;</span>)
        .<span style=color:#a6e22e>remove</span>();
}

<span style=color:#75715e>// paint a dot every 3.44ms (290 times a second)
</span><span style=color:#75715e></span><span style=color:#a6e22e>d3</span>.<span style=color:#a6e22e>interval</span>(<span style=color:#a6e22e>paintDot</span>, <span style=color:#ae81ff>3.44</span>) 
</code></pre></div><p>Under the hood, <code>d3.interval</code> calls <a href=https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame><code>requestAnimationFrame()</code></a>, which runs at 60fps. This isn&rsquo;t fast enough for rendering 290 objects a second; instead, I wrote functions to render multiple dots near-simultaneously with a total of 290 per second:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>paintTen</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
    <span style=color:#66d9ef>do</span> {
        <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
        <span style=color:#a6e22e>paintDot</span>();
    } <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>);
}
  
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>paint29</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
    <span style=color:#66d9ef>do</span> {
      <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
      <span style=color:#a6e22e>paintTen</span>();
    } <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>);
    <span style=color:#a6e22e>paintDot</span>();
}

<span style=color:#75715e>// paint 29 dots 10 times a second
</span><span style=color:#75715e></span><span style=color:#a6e22e>d3</span>.<span style=color:#a6e22e>interval</span>(<span style=color:#a6e22e>paint29</span>, <span style=color:#ae81ff>100</span>)
</code></pre></div><p>I prototyped and published the document using <a href=https://beta.observablehq.com>Observable</a>, which is a bit like Jupyter but for HTML/JS. It has a few quirks that require getting used to, but it&rsquo;s a very powerful tool. You can have text and equations that update in real time, interactive documents with inputs that get fed into your visualisations, and of course it&rsquo;s an excellent canvas for anything you can think to build in d3.js, WebGL or a number of other web graphics libraries.</p>
<p>You can see the final thing <a href=https://beta.observablehq.com/@henryaj/where-we-donate-and-why-it-matters>here</a>.</p>
</div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=https://henrystanley.com/where-we-donate-and-why-it-matters/>
<span class=button__icon>←</span>
<span class=button__text>🔗 Where We Donate and Why It Matters</span>
</a>
</span>
<span class="button next">
<a href=https://henrystanley.com/blagging-your-way-through-d3.js/>
<span class=button__text>Blagging your way through d3.js</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>Henry Stanley</span>
<span class=logo__cursor></span>
</a>
<div class=copyright>
<span>© 2021 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span>
</div>
</div>
</footer>
<script src=https://henrystanley.com/assets/main.js></script>
<script src=https://henrystanley.com/assets/prism.js></script>
</div>
</body>
</html>